(()=>{"use strict";const e="userData";console.log("starting index.js");const o=document.createElement("source");o.setAttribute("type","video/webm"),o.setAttribute("crossOrigin","anonymous"),o.setAttribute("src","./assets/star_loop_10x.webm");const n=document.getElementById("video-player");n.appendChild(o),n.load();const{accessToken:t,displayName:s}=function(){console.log("getting userData from localStorage");const o=window.localStorage.getItem(e);if(!o)return console.log("could not find userData in local storage, returning undefined"),{accessToken:void 0,refreshToken:void 0,expiresAt:void 0,email:void 0,displayName:void 0};const n=JSON.parse(o);return console.log("userData pulled from localStorage: ",n),console.log("returning from getUserData"),n}();if(!t){const e=document.querySelector(".new-sign-in");e.style.display="block",e.innerHTML='<a class="focusable" tabindex="0" href="https://king-prawn-app-eclfh.ondigitalocean.app/api/login">\n      Sign a new user into <span class="new-sign-in__spotify">Spotify</span></a>\n    '}if(t){console.log(`signed in with accessToken: ${t}`);const o=window.location.href.toString()+"visualizers/basic",n=document.querySelector(".go-to-visualizer");n.style.display="block",n.innerHTML=`\n      <a class="focusable" tabindex="0" href="${o}">Go to ${s}'s <span class="go-to-visualizer__visualizer focusable">Visualizer</span></a>\n    `;const i=document.querySelector(".sign-out-user");i.style.display="block",i.innerHTML=`\n      <button class="sign-out-button focusable" id="sign-out-button" tabindex="0">Sign Out ${s} from this device</button>\n    `;const l=document.getElementById("sign-out-button");l&&l.addEventListener("click",(()=>{console.log("signout clicked"),console.log("begin signing out user"),console.log("deleting userData from localStorage"),window.localStorage.removeItem(e),window.location.reload(),window.location.reload()}))}document.addEventListener("keydown",(function(e){37!==e.keyCode&&38!==e.keyCode&&39!==e.keyCode&&40!==e.keyCode||(console.log("--- direction pressed ---"),function(){let e=document.querySelectorAll(".focusable"),o=Array.prototype.slice.call(e);o.sort((function(e,o){return e===o?0:2&e.compareDocumentPosition(o)?1:-1}));let n=0;for(let e=0;e<o.length;e++)o[e].hasFocus()&&(n=e);o[n].focus()}()),e.keyCode})),console.log("exiting index.js")})();