(()=>{"use strict";const e="userData";console.log("starting index.js");const o=document.createElement("source");o.setAttribute("type","video/webm"),o.setAttribute("crossOrigin","anonymous"),o.setAttribute("src","./assets/star_loop_10x.webm");const t=document.getElementById("video-player");t.appendChild(o),t.load();const{accessToken:n,displayName:s}=function(){console.log("getting userData from localStorage");const o=window.localStorage.getItem(e);if(!o)return console.log("could not find userData in local storage, returning undefined"),{accessToken:void 0,refreshToken:void 0,expiresAt:void 0,email:void 0,displayName:void 0};const t=JSON.parse(o);return console.log("userData pulled from localStorage: ",t),console.log("returning from getUserData"),t}();if(!n){const e=document.querySelector(".new-sign-in");e.style.display="block",e.innerHTML='\n      <a class="focusable" tabindex="0" href="https://avt-sv-api-16ae49589f38.herokuapp.com/api/login">\n      Sign a new user into <span class="new-sign-in__spotify">Spotify</span></a>\n    '}if(n){console.log(`signed in with accessToken: ${n}`);const o=window.location.href.toString()+"visualizers/basic",t=document.querySelector(".go-to-visualizer");t.style.display="block",t.innerHTML=`\n      <a class="focusable" tabindex="0" href="${o}">Go to ${s}'s <span class="go-to-visualizer__visualizer focusable">Visualizer</span></a>\n    `;const i=document.querySelector(".sign-out-user");i.style.display="block",i.innerHTML=`\n      <button class="sign-out-button focusable" id="sign-out-button" tabindex="0">Sign Out ${s} from this device</button>\n    `;const l=document.getElementById("sign-out-button");l&&l.addEventListener("click",(()=>{console.log("signout clicked"),console.log("begin signing out user"),console.log("deleting userData from localStorage"),window.localStorage.removeItem(e),window.location.reload(),window.location.reload()}))}document.addEventListener("keydown",(function(e){37!==e.keyCode&&38!==e.keyCode&&39!==e.keyCode&&40!==e.keyCode||(console.log("--- direction pressed ---"),function(){let e=document.querySelectorAll(".focusable"),o=Array.prototype.slice.call(e);o.sort((function(e,o){return e===o?0:2&e.compareDocumentPosition(o)?1:-1}));let t=0;for(let e=0;e<o.length;e++)o[e].hasFocus()&&(t=e);o[t].focus()}()),e.keyCode})),console.log("exiting index.js")})();